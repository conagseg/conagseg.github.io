<!DOCTYPE html>
<html lang="ko" class="scroll-smooth">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="color-scheme" content="light dark" />
  <title>진짜찐짜 카드깡 — Gen2 Pack (Common 추가)</title>
  <meta name="description" content="Gen2 포커스 · common/one★/two★★/immersive/gold card · 확률 튜닝 버전" />
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>✨</text></svg>">
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          boxShadow: {
            'glow-c': '0 0 0 2px rgba(148,163,184,.6), 0 6px 18px rgba(0,0,0,.08)',
            'glow-1': '0 0 0 2px rgba(209,213,219,.6), 0 6px 18px rgba(0,0,0,.08)',
            'glow-2': '0 0 0 2px rgba(125,211,252,.6), 0 6px 18px rgba(0,0,0,.12)',
            'glow-e': '0 0 0 2px rgba(196,181,253,.7), 0 8px 24px rgba(0,0,0,.2)',
            'glow-g': '0 0 0 2px rgba(255,215,0,.8), 0 10px 28px rgba(0,0,0,.24)',
          }
        }
      }
    }
  </script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Pretendard:wght@400;600;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="./style.css" />
</head>
<body class="min-h-screen bg-gradient-to-b from-amber-50 to-white dark:from-zinc-900 dark:to-zinc-950 text-zinc-900 dark:text-zinc-100">
  <header class="sticky top-0 z-30 backdrop-blur bg-white/70 dark:bg-zinc-900/70 border-b border-zinc-200 dark:border-zinc-800">
    <div class="max-w-6xl mx-auto px-4 py-3 flex items-center justify-between">
      <div class="flex items-center gap-3">
        <span class="text-xl">✨</span>
        <h1 class="font-extrabold text-xl sm:text-2xl">진짜찐짜 카드깡 · Gen2 Pack</h1>
        <span class="text-xs bg-zinc-100 dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 rounded px-2 py-1">common / one★ / two★★ / immersive / gold</span>
      </div>
      <div class="flex items-center gap-2">
        <button id="themeToggle" class="px-3 py-2 text-sm rounded-lg border border-zinc-200 dark:border-zinc-700 hover:bg-zinc-100 dark:hover:bg-zinc-800" aria-label="테마 전환">라이트/다크</button>
      </div>
    </div>
  </header>

  <section class="max-w-6xl mx-auto px-4 mt-4">
    <div class="border border-amber-300 dark:border-amber-500 rounded-xl p-3 flex gap-3 items-start bg-amber-50/40 dark:bg-amber-950/20 text-sm leading-relaxed">
      <span class="text-amber-600 dark:text-amber-300">⚠️</span>
      <div>
        <p><b>팬메이드 시뮬레이터</b>입니다. 실제 결제/현금화 기능은 없으며 불법 금융행위와 무관합니다.</p>
        <p class="mt-1">이미지는 <a class="underline" href="https://github.com/PokeAPI/sprites" target="_blank" rel="noreferrer">PokeAPI/sprites</a>의 원격 URL을 사용하며, 일부 환경에서 404가 날 경우 자동 폴백을 적용합니다.</p>
      </div>
    </div>
  </section>

  <section class="max-w-6xl mx-auto px-4 mt-6 grid grid-cols-1 sm:grid-cols-3 gap-4">
    <div class="rounded-2xl border border-zinc-200 dark:border-zinc-800 bg-white/70 dark:bg-zinc-900/70 p-4">
      <div class="font-semibold text-sm mb-1 flex items-center gap-2"><span>☕</span>오늘의 카드 횟수</div>
      <div class="text-3xl font-extrabold tabular-nums"><span id="todayCount">0</span><span class="text-base font-medium ml-1">장</span></div>
      <p class="text-xs text-zinc-500 mt-1">“오늘의 커피슬롯” → <b>오늘의 카드 횟수</b></p>
    </div>
    <div class="rounded-2xl border border-zinc-200 dark:border-zinc-800 bg-white/70 dark:bg-zinc-900/70 p-4">
      <div class="font-semibold text-sm mb-1">누적 오픈</div>
      <div class="text-3xl font-extrabold tabular-nums"><span id="totalCount">0</span><span class="text-base font-medium ml-1">장</span></div>
      <div class="mt-2">
        <div class="w-full h-2 rounded bg-zinc-200 dark:bg-zinc-800">
          <div id="progressBar" class="h-2 rounded bg-amber-400" style="width: 0%"></div>
        </div>
        <p class="text-xs text-zinc-500 mt-1">다음 100장까지 <span id="toNext">100</span>장</p>
      </div>
    </div>
    <div class="rounded-2xl border border-zinc-200 dark:border-zinc-800 bg-white/70 dark:bg-zinc-900/70 p-4">
      <div class="font-semibold text-sm mb-1">오늘의 운세 게이지</div>
      <div class="flex items-center gap-2">
        <span>⭐</span>
        <div class="w-full h-2 rounded bg-zinc-200 dark:bg-zinc-800">
          <div id="luckBar" class="h-2 rounded bg-emerald-400" style="width: 0%"></div>
        </div>
      </div>
      <p class="text-xs text-zinc-500 mt-1">레어 등급이 높을수록 상승</p>
    </div>
  </section>

  <section class="max-w-6xl mx-auto px-4 mt-6 grid grid-cols-1 lg:grid-cols-2 gap-4">
    <div class="rounded-2xl border border-zinc-200 dark:border-zinc-800 bg-white/70 dark:bg-zinc-900/70 p-4">
      <div class="font-semibold text-base mb-3 flex items-center gap-2">🎰 오늘의 카드 슬롯</div>
      <div class="grid grid-cols-3 gap-3 mb-4">
        <div class="slot-cell"><span id="reel1">C</span></div>
        <div class="slot-cell"><span id="reel2">★</span></div>
        <div class="slot-cell"><span id="reel3">G</span></div>
      </div>
      <div class="flex flex-wrap items-center gap-2">
        <button id="spinBtn" class="btn-primary">스핀</button>
        <button id="openBtn" class="btn-secondary">팩 오픈(10장)</button>
        <button id="resetBtn" class="btn-ghost">오늘 카운트 초기화</button>
      </div>
      <p class="text-xs text-zinc-500 mt-3">스핀은 연출용이며, 팩 오픈 시 <b>오늘의 카드 횟수</b>가 10장 증가합니다.</p>
    </div>

    <div class="rounded-2xl border border-zinc-200 dark:border-zinc-800 bg-white/70 dark:bg-zinc-900/70 p-4">
      <div class="font-semibold text-base mb-3 flex items-center gap-2">✨ 최근 오픈 결과</div>
      <div id="packGrid" class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-3"></div>
      <div id="emptyHint" class="text-sm text-zinc-500">아직 오픈한 팩이 없습니다. 스핀 후 <b>팩 오픈</b>을 눌러보세요!</div>
    </div>
  </section>

  <section class="max-w-6xl mx-auto px-4 mt-10 mb-16">
    <div class="rounded-2xl border border-zinc-200 dark:border-zinc-800 bg-white/70 dark:bg-zinc-900/70 p-4 text-sm">
      <p class="font-semibold mb-1">확률표(요청 반영)</p>
      <ul class="list-disc pl-5 space-y-1">
        <li>common: <b>87.738%</b></li>
        <li>one star: <b>10.000%</b></li>
        <li>two star: <b>2.000%</b></li>
        <li>emulsive: <b>0.222%</b></li>
        <li>gold card: <b>0.040%</b></li>
      </ul>
      <p class="mt-2 text-zinc-500">※ 합계 100% 충족을 위해 미지정 12.738%를 common에 포함시켰습니다.</p>
    </div>
  </section>

  <script src="./app.js"></script>
</body>
</html>
